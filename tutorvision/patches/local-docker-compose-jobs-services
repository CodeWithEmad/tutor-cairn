vision-clickhouse-job:
    image: {{ VISION_CLICKHOUSE_DOCKER_IMAGE }}
    depends_on: {{ [("vision-clickhouse", VISION_RUN_CLICKHOUSE)]|list_if }}
    volumes:
        - ../plugins/vision/apps/clickhouse/auth.json:/scripts/clickhouse-auth.json:ro
        - ../plugins/vision/apps/clickhouse/migrations.d/:/etc/clickhouse-server/migrations.d/:ro
vision-superset-job:
    image: {{ VISION_SUPERSET_DOCKER_IMAGE }}
    volumes:
        - ../plugins/vision/apps/superset/superset_config.py:/app/superset_config.py:ro
    depends_on:
        - vision-postgresql
        - vision-redis
vision-openedx-job:
    image: {{ DOCKER_IMAGE_OPENEDX }}
    environment:
      SERVICE_VARIANT: lms
      SETTINGS: ${TUTOR_EDX_PLATFORM_SETTINGS:-tutor.production}
    volumes:
      - ../apps/openedx/settings/lms/:/openedx/edx-platform/lms/envs/tutor/:ro
      - ../apps/openedx/settings/cms/:/openedx/edx-platform/cms/envs/tutor/:ro
      - ../apps/openedx/config/:/openedx/config/:ro
      - ../plugins/vision/apps/openedx/scripts/:/openedx/scripts/:ro
      - ../plugins/vision/apps/clickhouse/auth.json:/openedx/clickhouse-auth.json:ro
    depends_on: {{ [("mysql", RUN_MYSQL), ("mongodb", RUN_MONGODB)]|list_if }}
